{% extends 'base.html' %}
{% load custom_filters %}

{% block title %}
Landing Page
{% endblock %}

{% block content %}
<h2>Welcome to the Landing Page</h2>
<form method="POST">
    {% csrf_token %}
    <div class="form-group">
        <label for="patient_name">Patient Name:</label>
        <input type="text" class="form-control" id="patient_name" name="patient_name" required>
    </div>
    <div class="form-group">
        <label for="dob">Date of Birth:</label>
        <input type="date" class="form-control" id="dob" name="dob" required>
    </div>
    <div class="form-group">
        <label for="immuneel_id">Immuneel Patient ID:</label>
        <input type="text" class="form-control" id="immuneel_id" name="immuneel_id" required>
    </div>
    <div class="form-group">
        <label for="hospital_id">Hospital Patient ID:</label>
        <input type="text" class="form-control" id="hospital_id" name="hospital_id" required>
    </div>
    <div class="form-group form-check">
        <input type="checkbox" class="form-check-input" id="generate_qr" name="generate_qr">
        <label class="form-check-label" for="generate_qr">Generate QR Code</label>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>

{% if patient_details %}
    <div class="mt-4">
        <h3>Patient Details</h3>
        <p>Name: {{ patient_details.patient_name }}</p>
        <p>Date of Birth: {{ patient_details.dob }}</p>
        <p>Immuneel Patient ID: {{ patient_details.immuneel_id }}</p>
        <p>Hospital Patient ID: {{ patient_details.hospital_id }}</p>
        {% if qr_code %}
            <img src="data:image/png;base64,{{ qr_code|b64encode }}" alt="QR Code">
        {% endif %}
    </div>
{% endif %}
{% endblock %}
